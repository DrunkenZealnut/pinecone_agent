<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ config.title }} - AI Î¨∏ÏÑú Í≤ÄÏÉâ</title>
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --primary-color: {{ config.color }};
            --gradient-from: {{ config.gradient_from }};
            --gradient-to: {{ config.gradient_to }};
            --primary-color-rgb: {{ config.color_rgb }};
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Navigation Bar */
        nav {
            background: rgba(0,0,0,0.3);
            padding: 15px 0;
            margin-bottom: 20px;
        }

        nav .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            font-size: 1rem;
            transition: color 0.3s;
        }

        nav a:hover {
            color: var(--primary-color);
        }

        nav .home-link {
            font-size: 1.2rem;
        }

        nav .nav-links {
            display: flex;
            gap: 20px;
        }

        header {
            text-align: center;
            padding: 40px 0;
        }

        header h1 {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        header p {
            color: #888;
            font-size: 1.1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(var(--primary-color-rgb), 0.2);
        }

        .stat-card .icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stat-card .label {
            color: #888;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .main-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .main-card h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .search-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .search-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .search-input-group {
            flex: 1;
            min-width: 200px;
        }

        .search-input-group label {
            display: block;
            margin-bottom: 8px;
            color: #aaa;
            font-size: 0.9rem;
        }

        input[type="text"], select, textarea {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        input[type="text"]:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 20px rgba(var(--primary-color-rgb), 0.3);
        }

        input[type="text"]::placeholder, textarea::placeholder {
            color: #666;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--gradient-from) 0%, var(--gradient-to) 100%);
            color: #fff;
        }

        .btn-primary:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(var(--primary-color-rgb), 0.4);
        }

        .btn-ai {
            background: linear-gradient(135deg, #9c27b0 0%, #673ab7 100%);
            color: #fff;
        }

        .btn-ai:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(156, 39, 176, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff4757 0%, #cc0022 100%);
            color: #fff;
        }

        .btn-danger:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(255, 71, 87, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-container {
            margin-top: 30px;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .results-header h3 {
            color: var(--primary-color);
        }

        .result-card {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            transition: border-color 0.3s;
        }

        .result-card:hover {
            border-color: var(--primary-color);
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .result-score {
            background: linear-gradient(135deg, var(--gradient-from) 0%, var(--gradient-to) 100%);
            color: #fff;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .result-meta {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }

        .result-meta span {
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            color: #aaa;
        }

        .result-meta span.type-image {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
        }

        .result-meta span.type-markdown {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
        }

        .result-meta span.type-json {
            background: rgba(156, 39, 176, 0.2);
            color: #ce93d8;
        }

        .result-content {
            color: #ccc;
            line-height: 1.6;
            font-size: 0.95rem;
            white-space: pre-wrap;
            word-break: break-word;
            max-height: 200px;
            overflow-y: auto;
        }

        /* AI Answer Styles */
        .ai-answer-container {
            background: rgba(156, 39, 176, 0.1);
            border: 1px solid rgba(156, 39, 176, 0.3);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .ai-answer-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: #ce93d8;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .ai-answer-content {
            color: #e0e0e0;
            line-height: 1.8;
            font-size: 1rem;
        }

        .ai-answer-content h1, .ai-answer-content h2, .ai-answer-content h3 {
            color: var(--primary-color);
            margin: 20px 0 10px 0;
        }

        .ai-answer-content h1 { font-size: 1.5rem; }
        .ai-answer-content h2 { font-size: 1.3rem; }
        .ai-answer-content h3 { font-size: 1.1rem; }

        .ai-answer-content p {
            margin-bottom: 15px;
        }

        .ai-answer-content ul, .ai-answer-content ol {
            margin: 15px 0;
            padding-left: 25px;
        }

        .ai-answer-content li {
            margin-bottom: 8px;
        }

        .ai-answer-content code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
        }

        .ai-answer-content pre {
            background: rgba(0, 0, 0, 0.4);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
        }

        .ai-answer-content pre code {
            background: none;
            padding: 0;
        }

        .ai-answer-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            overflow: hidden;
        }

        .ai-answer-content th, .ai-answer-content td {
            border: 1px solid rgba(255, 255, 255, 0.15);
            padding: 12px 16px;
            text-align: left;
        }

        .ai-answer-content th {
            background: linear-gradient(135deg, rgba(var(--primary-color-rgb), 0.3) 0%, rgba(var(--primary-color-rgb), 0.2) 100%);
            color: var(--primary-color);
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
        }

        .ai-answer-content tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.03);
        }

        .ai-answer-content tr:hover {
            background: rgba(var(--primary-color-rgb), 0.1);
        }

        /* Image Gallery Styles */
        .image-gallery {
            margin: 25px 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .image-gallery-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: #ffc107;
            font-weight: 600;
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
        }

        .image-item {
            position: relative;
            aspect-ratio: 4/3;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 2px solid transparent;
        }

        .image-item:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(var(--primary-color-rgb), 0.3);
            border-color: var(--primary-color);
        }

        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-item .image-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 8px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            font-size: 0.7rem;
            color: #ccc;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .image-item:hover .image-overlay {
            opacity: 1;
        }

        /* Lightbox for full image view */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .lightbox.active {
            display: flex;
        }

        .lightbox img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            border-radius: 8px;
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 2.5rem;
            color: #fff;
            cursor: pointer;
            transition: color 0.3s;
        }

        .lightbox-close:hover {
            color: var(--primary-color);
        }

        /* Chart Container */
        .chart-container {
            margin: 25px 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chart-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: #4caf50;
            font-weight: 600;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
        }

        .ai-answer-content strong {
            color: var(--primary-color);
        }

        /* Citation styling */
        .ai-answer-content a[href^="#source-"] {
            background: linear-gradient(135deg, #9c27b0 0%, #673ab7 100%);
            color: #fff;
            padding: 1px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: bold;
            text-decoration: none;
            margin: 0 2px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .ai-answer-content a[href^="#source-"]:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(156, 39, 176, 0.5);
        }

        .source-item {
            scroll-margin-top: 20px;
        }

        .source-item.highlighted {
            animation: highlight-pulse 2s ease-out;
        }

        @keyframes highlight-pulse {
            0% { box-shadow: 0 0 0 3px rgba(156, 39, 176, 0.8); }
            100% { box-shadow: 0 0 0 3px rgba(156, 39, 176, 0); }
        }

        .sources-section {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sources-header {
            color: #aaa;
            font-size: 0.9rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .source-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 10px;
            font-size: 0.85rem;
        }

        .source-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .source-item-file {
            color: var(--primary-color);
            word-break: break-all;
        }

        .source-item-score {
            color: #888;
            font-size: 0.8rem;
        }

        .source-item-preview {
            color: #888;
            font-size: 0.8rem;
            line-height: 1.4;
        }

        /* Source Image Styles */
        .source-image-item {
            background: rgba(255, 193, 7, 0.05);
            border-color: rgba(255, 193, 7, 0.3);
        }

        .source-image-container {
            position: relative;
            margin: 12px 0;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            max-width: 400px;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .source-image-container:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(255, 193, 7, 0.3);
        }

        .source-image-container img {
            width: 100%;
            height: auto;
            display: block;
        }

        .source-image-zoom {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 8px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            color: #ffc107;
            font-size: 0.75rem;
            text-align: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .source-image-container:hover .source-image-zoom {
            opacity: 1;
        }

        .namespace-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .namespace-tag {
            background: rgba(var(--primary-color-rgb), 0.2);
            color: var(--primary-color);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .namespace-tag .count {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        .spinner.ai {
            border-top-color: #9c27b0;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-state .icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #333;
            color: #fff;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            transform: translateX(150%);
            transition: transform 0.3s;
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: linear-gradient(135deg, #4caf50 0%, #388e3c 100%);
        }

        .toast.error {
            background: linear-gradient(135deg, #f44336 0%, #c62828 100%);
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: #888;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .tab.active {
            background: rgba(var(--primary-color-rgb), 0.2);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .tab.ai-tab.active {
            background: rgba(156, 39, 176, 0.2);
            border-color: #9c27b0;
            color: #ce93d8;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .hint {
            background: rgba(var(--primary-color-rgb), 0.1);
            border: 1px solid rgba(var(--primary-color-rgb), 0.3);
            border-radius: 8px;
            padding: 12px 15px;
            margin-top: 15px;
            font-size: 0.9rem;
            color: #aaa;
        }

        .hint strong {
            color: var(--primary-color);
        }

        /* Sample Question Links */
        .sample-question {
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .sample-question:hover {
            opacity: 0.7;
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8rem;
            }

            .search-row {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            nav .nav-links {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav>
        <div class="container">
            <a href="/" class="home-link">üè† Ìôà</a>
            <div class="nav-links">
                <a href="/semiconductor">üî¨ Î∞òÎèÑÏ≤¥</a>
                <a href="/laborlaw">‚öñÔ∏è ÎÖ∏ÎèôÎ≤ï</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <header>
            <h1>
                <span>{{ config.icon }}</span>
                {{ config.title }}
            </h1>
            <p>{{ config.description }}</p>
        </header>

        <!-- Stats Cards -->
        <div class="stats-grid" id="statsGrid">
            <div class="stat-card">
                <div class="icon">üìä</div>
                <div class="value" id="totalVectors">-</div>
                <div class="label">Ï¥ù Î≤°ÌÑ∞ Ïàò</div>
            </div>
            <div class="stat-card">
                <div class="icon">üìÅ</div>
                <div class="value" id="namespaceCount">-</div>
                <div class="label">ÎÑ§ÏûÑÏä§ÌéòÏù¥Ïä§</div>
            </div>
            <div class="stat-card">
                <div class="icon">üî¢</div>
                <div class="value" id="dimension">-</div>
                <div class="label">Ï∞®Ïõê (Dimension)</div>
            </div>
            <div class="stat-card">
                <div class="icon">üóÑÔ∏è</div>
                <div class="value" id="indexName">-</div>
                <div class="label">Ïù∏Îç±Ïä§</div>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs">
            <div class="tab ai-tab active" data-tab="ask">ü§ñ AI ÏßàÎ¨∏</div>
            <div class="tab" data-tab="search">üîç Î≤°ÌÑ∞ Í≤ÄÏÉâ</div>
            <div class="tab" data-tab="namespaces">üìÅ ÎÑ§ÏûÑÏä§ÌéòÏù¥Ïä§</div>
            <div class="tab" data-tab="delete">üóëÔ∏è ÏÇ≠Ï†ú</div>
        </div>

        <!-- AI Ask Tab -->
        <div class="tab-content active" id="tab-ask">
            <div class="main-card">
                <h2>ü§ñ AIÏóêÍ≤å ÏßàÎ¨∏ÌïòÍ∏∞</h2>
                <p style="color: #888; margin-bottom: 20px;">
                    {{ config.description }}
                </p>
                <form class="search-form" id="askForm">
                    <div class="search-input-group">
                        <label for="askQuery">ÏßàÎ¨∏ <span style="color: #9c27b0; font-size: 0.85rem;">(@Î°ú Î¨∏ÏÑú Î≤îÏúÑ ÏßÄÏ†ï Í∞ÄÎä•)</span></label>
                        <textarea id="askQuery" name="query" placeholder="ÏßàÎ¨∏ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." required></textarea>
                    </div>
                    <div class="search-row">
                        <div class="search-input-group">
                            <label for="askNamespace">ÎÑ§ÏûÑÏä§ÌéòÏù¥Ïä§</label>
                            <select id="askNamespace" name="namespace">
                                <option value="">Ï†ÑÏ≤¥</option>
                            </select>
                        </div>
                        <div class="search-input-group">
                            <label for="askTopK">Ï∞∏Í≥† Î¨∏ÏÑú Ïàò</label>
                            <select id="askTopK" name="topK">
                                <option value="5">5Í∞ú</option>
                                <option value="10" selected>10Í∞ú</option>
                                <option value="15">15Í∞ú</option>
                                <option value="20">20Í∞ú</option>
                            </select>
                        </div>
                        <div class="search-input-group" style="display: flex; align-items: flex-end;">
                            <button type="submit" class="btn btn-ai" style="width: 100%;">
                                ü§ñ AI ÎãµÎ≥Ä Î∞õÍ∏∞
                            </button>
                        </div>
                    </div>
                </form>

                <div class="hint">
                    <strong>üí° ÏÉòÌîå ÏßàÎ¨∏:</strong><br>
                    {% for question in config.sample_questions %}
                    ‚Ä¢ <a href="#" class="sample-question" style="color: var(--primary-color);">{{ question }}</a><br>
                    {% endfor %}
                </div>

                <div class="hint" style="background: rgba(156, 39, 176, 0.1); border-color: rgba(156, 39, 176, 0.3); margin-top: 10px;">
                    <strong>üìÅ ÏÇ¨Ïö© Í∞ÄÎä•Ìïú Î¨∏ÏÑú:</strong>
                    <span id="availableSources" style="color: #ce93d8;">Î°úÎî© Ï§ë...</span>
                </div>

                <!-- Loading -->
                <div class="loading" id="askLoading">
                    <div class="spinner ai"></div>
                    <p>AIÍ∞Ä Î¨∏ÏÑúÎ•º Î∂ÑÏÑùÌïòÍ≥† ÏûàÏäµÎãàÎã§...</p>
                </div>

                <!-- AI Answer -->
                <div class="results-container" id="askResultsContainer">
                    <div class="empty-state" id="askEmptyState">
                        <div class="icon">ü§ñ</div>
                        <p>ÏßàÎ¨∏ÏùÑ ÏûÖÎ†•ÌïòÍ≥† 'AI ÎãµÎ≥Ä Î∞õÍ∏∞' Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Search Tab -->
        <div class="tab-content" id="tab-search">
            <div class="main-card">
                <h2>üîç Î≤°ÌÑ∞ Ïú†ÏÇ¨ÎèÑ Í≤ÄÏÉâ</h2>
                <p style="color: #888; margin-bottom: 20px;">
                    ÏûÖÎ†•Ìïú ÌÖçÏä§Ìä∏ÏôÄ ÏùòÎØ∏Ï†ÅÏúºÎ°ú Ïú†ÏÇ¨Ìïú Î¨∏ÏÑú Ï≤≠ÌÅ¨Î•º Í≤ÄÏÉâÌï©ÎãàÎã§.
                </p>
                <form class="search-form" id="searchForm">
                    <div class="search-row">
                        <div class="search-input-group" style="flex: 2;">
                            <label for="query">Í≤ÄÏÉâÏñ¥</label>
                            <input type="text" id="query" name="query" placeholder="Í≤ÄÏÉâÌï† ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." required>
                        </div>
                        <div class="search-input-group">
                            <label for="namespace">ÎÑ§ÏûÑÏä§ÌéòÏù¥Ïä§</label>
                            <select id="namespace" name="namespace">
                                <option value="">Ï†ÑÏ≤¥</option>
                            </select>
                        </div>
                    </div>
                    <div class="search-row">
                        <div class="search-input-group">
                            <label for="topK">Í≤∞Í≥º Í∞úÏàò</label>
                            <select id="topK" name="topK">
                                <option value="3">3Í∞ú</option>
                                <option value="5" selected>5Í∞ú</option>
                                <option value="10">10Í∞ú</option>
                                <option value="20">20Í∞ú</option>
                            </select>
                        </div>
                        <div class="search-input-group">
                            <label for="fileType">ÌååÏùº ÌÉÄÏûÖ</label>
                            <select id="fileType" name="fileType">
                                <option value="">Ï†ÑÏ≤¥</option>
                                <option value="image">Ïù¥ÎØ∏ÏßÄ</option>
                                <option value="markdown">ÎßàÌÅ¨Îã§Ïö¥</option>
                                <option value="json">JSON</option>
                            </select>
                        </div>
                        <div class="search-input-group" style="display: flex; align-items: flex-end;">
                            <button type="submit" class="btn btn-primary" style="width: 100%;">
                                Í≤ÄÏÉâ
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Loading -->
                <div class="loading" id="searchLoading">
                    <div class="spinner"></div>
                    <p>Í≤ÄÏÉâ Ï§ë...</p>
                </div>

                <!-- Results -->
                <div class="results-container" id="resultsContainer">
                    <div class="empty-state" id="emptyState">
                        <div class="icon">üîç</div>
                        <p>Í≤ÄÏÉâÏñ¥Î•º ÏûÖÎ†•ÌïòÍ≥† Í≤ÄÏÉâ Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Namespaces Tab -->
        <div class="tab-content" id="tab-namespaces">
            <div class="main-card">
                <h2>üìÅ ÎÑ§ÏûÑÏä§ÌéòÏù¥Ïä§ Î™©Î°ù</h2>
                <div class="namespace-list" id="namespaceList">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Delete Tab -->
        <div class="tab-content" id="tab-delete">
            <div class="main-card">
                <h2>üóëÔ∏è Î≤°ÌÑ∞ ÏÇ≠Ï†ú</h2>
                <form class="search-form" id="deleteForm">
                    <div class="search-row">
                        <div class="search-input-group">
                            <label for="deleteNamespace">ÎÑ§ÏûÑÏä§ÌéòÏù¥Ïä§</label>
                            <select id="deleteNamespace" name="deleteNamespace">
                                <option value="">Ï†ÑÏ≤¥ (Í∏∞Î≥∏)</option>
                            </select>
                        </div>
                        <div class="search-input-group">
                            <label for="sourceFile">ÏÜåÏä§ ÌååÏùº Í≤ΩÎ°ú (ÏÑ†ÌÉù)</label>
                            <input type="text" id="sourceFile" name="sourceFile" placeholder="ÌäπÏ†ï ÌååÏùºÎßå ÏÇ≠Ï†úÌïòÎ†§Î©¥ Í≤ΩÎ°ú ÏûÖÎ†•...">
                        </div>
                    </div>
                    <div class="search-row">
                        <button type="submit" class="btn btn-danger">
                            üóëÔ∏è ÏÇ≠Ï†ú
                        </button>
                    </div>
                </form>
                <p style="margin-top: 20px; color: #ff6b6b; font-size: 0.9rem;">
                    ‚ö†Ô∏è Ï£ºÏùò: ÏÇ≠Ï†úÎêú Î≤°ÌÑ∞Îäî Î≥µÍµ¨Ìï† Ïàò ÏóÜÏäµÎãàÎã§.
                </p>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Lightbox for full image view -->
    <div class="lightbox" id="lightbox">
        <span class="lightbox-close" onclick="closeLightbox()">&times;</span>
        <img id="lightboxImage" src="" alt="Full size image">
    </div>

    <script>
        // Default namespace configuration
        const DEFAULT_NAMESPACE = '{{ config.namespace }}';

        // Active chart instances for cleanup
        let activeCharts = [];

        // Set default namespace value on page load
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('askNamespace').value = DEFAULT_NAMESPACE;
        });

        // Sample question click handlers
        document.querySelectorAll('.sample-question').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('askQuery').value = e.target.textContent;
            });
        });

        // Tab functionality
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                tab.classList.add('active');
                document.getElementById('tab-' + tab.dataset.tab).classList.add('active');
            });
        });

        // Toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast show ' + type;

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Lightbox functions
        function openLightbox(imageSrc) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImage = document.getElementById('lightboxImage');
            lightboxImage.src = imageSrc;
            lightbox.classList.add('active');
        }

        function closeLightbox() {
            document.getElementById('lightbox').classList.remove('active');
        }

        // Close lightbox on background click
        document.getElementById('lightbox').addEventListener('click', (e) => {
            if (e.target.id === 'lightbox') {
                closeLightbox();
            }
        });

        // Close lightbox on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeLightbox();
            }
        });

        // Parse chart data from AI response
        function extractChartData(answer) {
            const chartRegex = /<!--CHART_DATA\s*([\s\S]*?)\s*CHART_DATA-->/g;
            const charts = [];
            let match;
            while ((match = chartRegex.exec(answer)) !== null) {
                try {
                    charts.push(JSON.parse(match[1]));
                } catch (e) {
                    console.error('Failed to parse chart data:', e);
                }
            }
            // Remove chart data from answer for display
            const cleanAnswer = answer.replace(chartRegex, '');
            return { cleanAnswer, charts };
        }

        // Render chart using Chart.js
        function renderChart(chartData, containerId) {
            const ctx = document.getElementById(containerId).getContext('2d');

            const colors = [
                'rgba(0, 212, 255, 0.8)',
                'rgba(156, 39, 176, 0.8)',
                'rgba(76, 175, 80, 0.8)',
                'rgba(255, 193, 7, 0.8)',
                'rgba(244, 67, 54, 0.8)',
                'rgba(33, 150, 243, 0.8)'
            ];

            const config = {
                type: chartData.type || 'bar',
                data: {
                    labels: chartData.labels || [],
                    datasets: [{
                        label: chartData.title || 'Data',
                        data: chartData.data || [],
                        backgroundColor: chartData.type === 'line'
                            ? 'rgba(0, 212, 255, 0.2)'
                            : colors.slice(0, chartData.data?.length || 1),
                        borderColor: chartData.type === 'line'
                            ? 'rgba(0, 212, 255, 1)'
                            : colors.slice(0, chartData.data?.length || 1),
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#e0e0e0' }
                        },
                        title: {
                            display: true,
                            text: chartData.title || '',
                            color: '#00d4ff',
                            font: { size: 14 }
                        }
                    },
                    scales: chartData.type !== 'pie' ? {
                        y: {
                            beginAtZero: true,
                            ticks: { color: '#aaa' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        },
                        x: {
                            ticks: { color: '#aaa' },
                            grid: { color: 'rgba(255,255,255,0.1)' }
                        }
                    } : {}
                }
            };

            const chart = new Chart(ctx, config);
            activeCharts.push(chart);
            return chart;
        }

        // Render image gallery
        function renderImageGallery(images) {
            if (!images || images.length === 0) return '';

            let html = `
                <div class="image-gallery">
                    <div class="image-gallery-header">
                        <span>üñºÔ∏è</span> Í¥ÄÎ†® Ïù¥ÎØ∏ÏßÄ (${images.length}Í∞ú) - ÌÅ¥Î¶≠ÌïòÏó¨ ÌôïÎåÄ
                    </div>
                    <div class="image-grid">
            `;

            images.forEach(img => {
                const escapedPath = escapeHtml(img.path).replace(/'/g, '&#39;');
                const escapedName = escapeHtml(img.name);
                const displayName = img.name.length > 30
                    ? img.name.substring(0, 27) + '...'
                    : img.name;
                const escapedDisplayName = escapeHtml(displayName);
                html += `
                    <div class="image-item" onclick="openLightbox('${escapedPath}')">
                        <img src="${escapedPath}" alt="${escapedName}" loading="lazy">
                        <div class="image-overlay">${escapedDisplayName}</div>
                    </div>
                `;
            });

            html += '</div></div>';
            return html;
        }

        // Load stats
        async function loadStats() {
            try {
                const response = await fetch('/api/stats');
                const data = await response.json();

                if (data.success) {
                    document.getElementById('totalVectors').textContent = data.data.total_vectors.toLocaleString();
                    document.getElementById('namespaceCount').textContent = data.data.namespaces.length;
                    document.getElementById('dimension').textContent = data.data.dimension;
                    document.getElementById('indexName').textContent = data.data.index_name;

                    // Update namespace dropdowns
                    const selects = ['namespace', 'askNamespace', 'deleteNamespace'];
                    const namespaceList = document.getElementById('namespaceList');

                    // Find namespace with most vectors for auto-selection
                    let maxVectorsNs = null;
                    let maxVectors = 0;
                    data.data.namespaces.forEach(ns => {
                        if (ns.vector_count > maxVectors) {
                            maxVectors = ns.vector_count;
                            maxVectorsNs = ns.name === '(Í∏∞Î≥∏)' ? '' : ns.name;
                        }
                    });

                    selects.forEach(selectId => {
                        const select = document.getElementById(selectId);
                        if (select) {
                            const firstOption = select.options[0];
                            select.innerHTML = '';
                            select.appendChild(firstOption);

                            data.data.namespaces.forEach(ns => {
                                const option = document.createElement('option');
                                option.value = ns.name === '(Í∏∞Î≥∏)' ? '' : ns.name;
                                option.textContent = `${ns.name} (${ns.vector_count.toLocaleString()}Í∞ú)`;
                                select.appendChild(option);
                            });

                            // Use default namespace if configured, otherwise use the one with most vectors
                            if (DEFAULT_NAMESPACE) {
                                select.value = DEFAULT_NAMESPACE;
                            } else if (maxVectorsNs !== null) {
                                select.value = maxVectorsNs;
                            }
                        }
                    });

                    namespaceList.innerHTML = '';
                    data.data.namespaces.forEach(ns => {
                        const tag = document.createElement('div');
                        tag.className = 'namespace-tag';
                        tag.innerHTML = `
                            <span>${ns.name}</span>
                            <span class="count">${ns.vector_count.toLocaleString()}Í∞ú</span>
                        `;
                        namespaceList.appendChild(tag);
                    });
                }
            } catch (error) {
                console.error('Failed to load stats:', error);
            }
        }

        // AI Ask functionality
        document.getElementById('askForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const query = document.getElementById('askQuery').value;
            const namespace = document.getElementById('askNamespace').value;
            const topK = document.getElementById('askTopK').value;

            const loading = document.getElementById('askLoading');
            const resultsContainer = document.getElementById('askResultsContainer');

            loading.classList.add('active');
            resultsContainer.innerHTML = '';

            try {
                const response = await fetch('/api/ask', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query, namespace, top_k: topK })
                });

                const data = await response.json();

                loading.classList.remove('active');

                // Debug logging for troubleshooting
                console.log('API Response:', data);

                if (data.success) {
                    // Validate response data
                    if (!data.data || !data.data.answer) {
                        console.error('Invalid response data:', data);
                        showToast('ÏùëÎãµ Îç∞Ïù¥ÌÑ∞ ÌòïÏãù Ïò§Î•ò', 'error');
                        resultsContainer.innerHTML = `
                            <div class="empty-state">
                                <div class="icon">‚ö†Ô∏è</div>
                                <p>ÏùëÎãµ Îç∞Ïù¥ÌÑ∞Î•º Ï≤òÎ¶¨Ìï† Ïàò ÏóÜÏäµÎãàÎã§.</p>
                            </div>
                        `;
                        return;
                    }

                    // Destroy previous charts
                    activeCharts.forEach(chart => chart.destroy());
                    activeCharts = [];

                    // Extract chart data from answer
                    const { cleanAnswer, charts } = extractChartData(data.data.answer || '');

                    // Convert citation numbers [1], [2] to clickable links
                    let answerHtml = marked.parse(cleanAnswer);
                    answerHtml = answerHtml.replace(/\[(\d+)\]/g, '<a href="#source-$1" class="citation" data-source="$1">[$1]</a>');

                    // Render AI answer with markdown
                    let html = `
                        <div class="ai-answer-container">
                            <div class="ai-answer-header">
                                <span>ü§ñ</span> AI ÎãµÎ≥Ä
                            </div>
                            <div class="ai-answer-content" id="aiAnswerContent">
                                ${answerHtml}
                            </div>
                        </div>
                    `;

                    // Add charts if present
                    if (charts.length > 0) {
                        charts.forEach((chartData, index) => {
                            html += `
                                <div class="chart-container">
                                    <div class="chart-header">
                                        <span>üìä</span> ${chartData.title || 'Îç∞Ïù¥ÌÑ∞ ÏãúÍ∞ÅÌôî'}
                                    </div>
                                    <div class="chart-wrapper">
                                        <canvas id="chart-${index}"></canvas>
                                    </div>
                                </div>
                            `;
                        });
                    }

                    // Add image gallery if images are available
                    if (data.data.images && data.data.images.length > 0) {
                        html += renderImageGallery(data.data.images);
                    }

                    // Add sources section
                    if (data.data.sources && data.data.sources.length > 0) {
                        html += `
                            <div class="sources-section">
                                <div class="sources-header">
                                    <span>üìö</span> Ï∞∏Í≥† Î¨∏ÏÑú (${data.data.source_count || data.data.sources.length}Í∞ú)
                                </div>
                        `;

                        data.data.sources.forEach((source, index) => {
                            const sourceFile = source.source_file || 'Unknown';
                            const fileType = source.file_type || 'unknown';
                            const score = source.score !== undefined ? source.score : 0;
                            const contentPreview = source.content_preview || '';
                            const typeClass = 'type-' + fileType;
                            html += `
                                <div class="source-item" id="source-${index + 1}">
                                    <div class="source-item-header">
                                        <span class="source-item-file">[${index + 1}] ${escapeHtml(sourceFile.split('/').pop())}</span>
                                        <span class="source-item-score">Ïú†ÏÇ¨ÎèÑ: ${score}</span>
                                    </div>
                                    <div class="source-item-preview">${escapeHtml(contentPreview)}</div>
                                </div>
                            `;
                        });

                        html += '</div>';
                    }

                    try {
                        resultsContainer.innerHTML = html;

                        // Render charts after HTML is inserted
                        if (charts.length > 0) {
                            charts.forEach((chartData, index) => {
                                requestAnimationFrame(() => {
                                    try {
                                        renderChart(chartData, `chart-${index}`);
                                    } catch (chartErr) {
                                        console.error('Chart render error:', chartErr);
                                    }
                                });
                            });
                        }

                        // Add click handlers for citations
                        document.querySelectorAll('.citation').forEach(link => {
                            link.addEventListener('click', (e) => {
                                e.preventDefault();
                                const sourceNum = link.dataset.source;
                                const sourceEl = document.getElementById('source-' + sourceNum);
                                if (sourceEl) {
                                    sourceEl.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                    sourceEl.classList.add('highlighted');
                                    setTimeout(() => sourceEl.classList.remove('highlighted'), 2000);
                                }
                            });
                        });
                    } catch (renderErr) {
                        console.error('Render error:', renderErr);
                        showToast('Í≤∞Í≥º ÌëúÏãú Ï§ë Ïò§Î•ò Î∞úÏÉù', 'error');
                    }
                } else {
                    console.error('API error:', data.error);
                    showToast(data.error || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•ò', 'error');
                    resultsContainer.innerHTML = `
                        <div class="empty-state">
                            <div class="icon">‚ùå</div>
                            <p>${escapeHtml(data.error || 'Ïïå Ïàò ÏóÜÎäî Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.')}</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Fetch error:', error);
                loading.classList.remove('active');
                showToast('AI ÎãµÎ≥Ä ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§: ' + error.message, 'error');
            }
        });

        // Search functionality
        document.getElementById('searchForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const query = document.getElementById('query').value;
            const namespace = document.getElementById('namespace').value;
            const topK = document.getElementById('topK').value;
            const fileType = document.getElementById('fileType').value;

            const loading = document.getElementById('searchLoading');
            const resultsContainer = document.getElementById('resultsContainer');
            const emptyState = document.getElementById('emptyState');

            loading.classList.add('active');
            resultsContainer.innerHTML = '';

            try {
                const response = await fetch('/api/search', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query, namespace, top_k: topK, file_type: fileType })
                });

                const data = await response.json();

                loading.classList.remove('active');

                if (data.success) {
                    if (data.data.results.length === 0) {
                        resultsContainer.innerHTML = `
                            <div class="empty-state">
                                <div class="icon">üòï</div>
                                <p>Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§</p>
                            </div>
                        `;
                    } else {
                        resultsContainer.innerHTML = `
                            <div class="results-header">
                                <h3>Í≤ÄÏÉâ Í≤∞Í≥º (${data.data.count}Í∞ú)</h3>
                            </div>
                        `;

                        data.data.results.forEach((result, index) => {
                            const typeClass = 'type-' + result.file_type;
                            const card = document.createElement('div');
                            card.className = 'result-card';
                            card.innerHTML = `
                                <div class="result-header">
                                    <div class="result-meta">
                                        <span class="${typeClass}">${result.file_type}</span>
                                        <span>üìÑ ${result.filename || result.source_file.split('/').pop()}</span>
                                    </div>
                                    <div class="result-score">Ïú†ÏÇ¨ÎèÑ: ${result.score}</div>
                                </div>
                                <div class="result-meta">
                                    <span title="${result.source_file}">üìÅ ${result.source_file}</span>
                                </div>
                                <div class="result-content">${escapeHtml(result.content)}</div>
                            `;
                            resultsContainer.appendChild(card);
                        });
                    }
                } else {
                    showToast(data.error, 'error');
                }
            } catch (error) {
                loading.classList.remove('active');
                showToast('Í≤ÄÏÉâ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.', 'error');
            }
        });

        // Delete functionality
        document.getElementById('deleteForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const namespace = document.getElementById('deleteNamespace').value;
            const sourceFile = document.getElementById('sourceFile').value;

            const confirmMsg = sourceFile
                ? `'${sourceFile}' ÌååÏùºÏùò Î≤°ÌÑ∞Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?`
                : `ÎÑ§ÏûÑÏä§ÌéòÏù¥Ïä§ '${namespace || '(Í∏∞Î≥∏)'}' Ïùò Î™®Îì† Î≤°ÌÑ∞Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?`;

            if (!confirm(confirmMsg)) return;

            try {
                const response = await fetch('/api/delete', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        namespace,
                        source_file: sourceFile,
                        delete_all: !sourceFile
                    })
                });

                const data = await response.json();

                if (data.success) {
                    showToast(data.message, 'success');
                    loadStats();
                } else {
                    showToast(data.error, 'error');
                }
            } catch (error) {
                showToast('ÏÇ≠Ï†ú Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.', 'error');
            }
        });

        // Escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Load available sources for @ mention hints
        async function loadSources() {
            try {
                const namespace = document.getElementById('askNamespace').value;
                const response = await fetch(`/api/sources?namespace=${encodeURIComponent(namespace)}`);
                const data = await response.json();

                if (data.success) {
                    const sourcesEl = document.getElementById('availableSources');
                    const folders = data.data.folders.slice(0, 5);
                    const files = data.data.files.slice(0, 5);

                    let hints = [];
                    if (folders.length > 0) {
                        // Extract short folder names
                        const shortFolders = folders.map(f => {
                            const parts = f.split('/');
                            return parts[parts.length - 1];
                        }).filter(f => f.length > 0).slice(0, 3);
                        hints.push(...shortFolders.map(f => `@${f}/`));
                    }
                    if (files.length > 0) {
                        // Extract keywords from file names
                        const keywords = files.map(f => {
                            // Extract meaningful part from filename
                            const match = f.match(/_([\uAC00-\uD7AF_]+)\./);
                            return match ? match[1].split('_').slice(0, 2).join('_') : null;
                        }).filter(k => k).slice(0, 3);
                        hints.push(...keywords.map(k => `@${k}`));
                    }

                    if (hints.length > 0) {
                        sourcesEl.innerHTML = hints.map(h =>
                            `<code style="background: rgba(156,39,176,0.2); padding: 2px 6px; border-radius: 4px; margin: 2px;">${h}</code>`
                        ).join(' ');
                    } else {
                        sourcesEl.textContent = 'Î¨∏ÏÑú ÏóÜÏùå';
                    }
                }
            } catch (error) {
                console.error('Failed to load sources:', error);
                document.getElementById('availableSources').textContent = 'Î°úÎìú Ïã§Ìå®';
            }
        }

        // Reload sources when namespace changes
        document.getElementById('askNamespace').addEventListener('change', loadSources);

        // Initial load
        loadStats();
        setTimeout(loadSources, 1000); // Load sources after stats
    </script>
</body>
</html>
